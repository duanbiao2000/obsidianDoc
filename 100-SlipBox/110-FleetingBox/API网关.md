API网关（API Gateway）是一种用于管理和控制API的中间层，位于客户端和后端服务之间。它可以提供统一的接口和功能，用于处理API请求、路由请求到不同的后端服务、进行安全认证和授权、限流和流量控制、监控和日志记录等。
API网关的主要功能包括：
1. 路由和转发：API网关可以根据请求的URL、方法、头部等信息，将请求转发到后端的不同服务或微服务。
2. 安全认证和授权：API网关可以处理用户身份验证、权限验证和访问控制等安全相关的功能，确保只有经过授权的用户可以访问API。
3. 限流和流量控制：API网关可以对API请求进行限流和流量控制，以防止恶意攻击、过载和资源滥用，保护后端服务的稳定性和可用性。
4. 缓存和性能优化：API网关可以缓存请求结果，减少对后端服务的访问，提高响应速度和性能。
5. 监控和日志记录：API网关可以收集和记录API请求的日志和指标，进行性能监控、故障排查和分析。
6. 转换和聚合：API网关可以对请求和响应进行转换、格式化和聚合，以提供更适合客户端的数据和格式。
7. 版本管理和发布：API网关可以管理不同版本的API，并提供版本控制和发布管理功能。
常见的API网关包括Kong、Apigee、AWS API Gateway、Azure API Management等。它们提供了丰富的功能和工具，使得开发者可以更方便地管理和控制API，提高API的安全性、性能和可扩展性。

API网关在系统架构中扮演着重要的角色，它具有以下几个主要作用：
1. 服务代理和请求路由：API网关作为客户端和后端服务之间的中间层，接收客户端的API请求，并根据路由规则将请求转发到适当的后端服务。它可以隐藏后端服务的具体细节和拓扑结构，简化客户端与后端服务之间的通信和交互。
2. 安全性和认证授权：API网关可以处理用户身份验证、权限验证和访问控制等安全相关的功能。它可以验证请求的身份凭证，确保只有经过授权的用户可以访问API，并提供安全的认证和授权机制，保护后端服务免受恶意攻击和未经授权的访问。
3. 限流和流量控制：API网关可以对API请求进行限流和流量控制，以防止恶意攻击、过载和资源滥用，保护后端服务的稳定性和可用性。它可以设置请求速率限制、并发连接限制等策略，确保后端服务在合理的负载范围内运行。
4. 缓存和性能优化：API网关可以缓存请求结果，减少对后端服务的访问，提高响应速度和性能。它可以根据请求的特性和响应的缓存策略，进行数据缓存和响应缓存，以提供更快速的响应和降低后端服务的负载。
5. 监控和日志记录：API网关可以收集和记录API请求的日志和指标，进行性能监控、故障排查和分析。它可以记录请求的元数据、错误信息、响应时间等，提供可视化的监控和报告，帮助开发者了解API的使用情况和性能状况。
6. 转换和聚合：API网关可以对请求和响应进行转换、格式化和聚合，以提供更适合客户端的数据和格式。它可以根据客户端的需求进行数据格式转换、数据过滤和数据聚合，使得客户端可以以更便捷的方式获取所需的数据。
通过以上作用，API网关提供了一种集中管理和控制API的方式，简化了系统架构的复杂性，提高了系统的安全性、性能和可扩展性。它还可以促进团队协作和管理，提供更好的开发体验和易用性。

以下是一个简单的Express框架下使用API网关的示例代码：
首先，安装必要的依赖包：
```bash
npm install express body-parser
```
然后，创建一个Express应用，设置API网关的路由和功能：
```javascript
const express = require('express');
const bodyParser = require('body-parser');
const app = express();
app.use(bodyParser.json());
// API网关路由
app.get('/api/users', (req, res) => {
  // 处理用户列表请求
  // ...
});
app.post('/api/users', (req, res) => {
  // 处理创建用户请求
  // ...
});
app.put('/api/users/:id', (req, res) => {
  // 处理更新用户请求
  // ...
});
app.delete('/api/users/:id', (req, res) => {
  // 处理删除用户请求
  // ...
});
// 启动服务器
app.listen(3000, () => {
  console.log('API Gateway server started on port 3000');
});
```
在上述示例中，我们创建了一个基本的Express应用，并设置了API网关的路由。根据请求的URL和方法，我们可以在每个路由处理函数中执行相应的操作，例如处理用户列表请求、创建用户请求、更新用户请求和删除用户请求。
请注意，上述示例代码仅演示了API网关的基本结构和路由设置，实际的应用中可能涉及更复杂的业务逻辑和功能。根据具体需求，你可以在路由处理函数中调用其他服务、进行身份验证、授权、限流等操作，以构建完整和安全的API网关应用。