---
rating: 2.5
related:
- '[[Python代码注释规范自适应提示词]]'
- '[[2025-12-11-AI在写代码领域的当前水平]]'
tags:
- CodeAnnotationStandards
- DynamicCodeDocumentation
- CodeQualityAssessment
- TechnicalWriting
- Type/Reference
- Domain/Technology
update: 2026-01-07 00:04
view-count: 11
---
## 1. 分析（Analysis）

本规范旨在将代码注释从随意的文字描述提升为标准化的协议系统，通过差异化策略降低系统维护的熵值。

- **分层决策**：基于 RFC 2119 定义强制性（MUST/SHOULD/MAY），将注释成本集中在高价值区域。
- **范式对标**：对比 Google（结构化/文档优先）与 Meta（意图/为什么优先）两套工业标准。
- **I/O 契约**：将函数注释视为 API 的逻辑边界（Args/Returns/Raises），而非实现复述。
- **性能/约束记录**：注释需承载 P99 延迟、并发限制等非功能性 SLA 数据。
- **技术债追踪**：通过标准 Tags（TODO/FIXME/HACK）建立可检索的决策上下文。

## 2. 抽象（Abstraction）

- **意图驱动原则**：注释的价值 $\propto \frac{\text{意图与权衡}}{\text{逻辑可见性}}$。
  - *场景：* 当逻辑非直观或存在性能折中时，注释必须阐明“为什么”而非“做什么”。
- **机器可读原则**：API 边界必须结构化。
  - *场景：* 跨团队、跨模块调用时，必须使用工具可解析的 Docstring 确保协议一致性。
- **有效期约束**：注释是随代码演进的动态资产。
  - *场景：* 修改实现逻辑时，注释同步成本应计入开发周期，失效注释的负价值大于零。

## 3. 结构化（Structure）

**逻辑输入 → 标准处理 → 语义输出 → 维护闭环**

- **输入**：复杂算法、API 边界、性能权衡。
- **处理**：
  - **结构化编码**（Google 式）：Args → Returns → Raises。
  - **意图注入**（Meta 式）：Explain Why + Trade-offs。
- **输出**：可解析文档、低负载 Code Review、透明决策链。
- **反馈**：通过 Tags 触发 Issue/重构提醒。

## 4. 应用（Application）

### 决策规则 (Decision Rules)

- **IF** 定义公开 API 或核心框架：**THEN** MUST 采用 Google 结构化 Docstring。
- **IF** 优化性能关键路径：**THEN** SHOULD 标注权衡及 Benchmark 数据（如：`// 约节省 30% 内存`）。
- **IF** 使用临时变通方案 (HACK)：**THEN** MUST 标注删除期限及关联 Issue ID。

### 执行 Checklist

- [ ] **边界检查**：Args/Returns 的类型、范围约束、边界返回值是否明确？
- [ ] **意图审查**：行内注释是否解释了“非此不可”的原因？
- [ ] **标签规范**：所有 TODO/FIXME 是否均有 Owner 和追踪 ID？
- [ ] **SLA 记录**：复杂函数的性能基准（Latency/Concurrency）是否已标注？
- [ ] **同步校验**：代码逻辑修改后，对应的注释是否已手动同步更新？
