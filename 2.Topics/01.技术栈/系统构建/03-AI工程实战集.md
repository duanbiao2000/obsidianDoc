---
rating: 3.5
related: null
tags:
- PromptEngineering
- AgentDevelopment
- Methodology
- DevProcess
- AI
- Domain/AI
- Domain/AI/Agent
- Type/Reference
update: 2026-01-21 20:11
view-count: 2
---

# AI 工程实战集

> 本文档整合了 AI 时代工程实践，从提示词工程到 Agent 开发，为工程师转型提供完整的参考体系。

---

## 📚 一、提示词工程

### 1. 提示词设计原则

**核心结构**：

```markdown
# Role
[角色名称和定位]

## Context
[背景信息和上下文]

## Task
[明确的任务描述]

## Constraints
[约束条件和边界]

## Format
[输出格式要求]

## Output
[期望输出结果]
```

**设计要点**：

- **角色明确**：设定清晰的 Agent 角色和职责
- **上下文完整**：提供充足的背景信息和上下文
- **任务清晰**：使用动作动词描述任务
- **约束明确**：说明限制条件和边界
- **格式规范**：明确输出格式要求

---

### 2. 常用提示词模板

#### 提示词优化器

*源自：[[Command-R使用指南]]*

**场景**：优化现有提示词，提升 AI 输出质量

**操作流程**：

1. 输入原始提示词
2. 优化指令清晰度
3. 优化输出结构
4. 测试优化效果
5. 保存到模板库

**优化技巧**：

- 使用分隔符组织长提示词
- 明确输出格式要求
- 添加示例说明
- 指定思维链（Chain of Thought）

---

### 3. RAG 系统设计

*源自：[[Spec成为单一事实源]]*

**架构组件**：

```
┌─────────────────────────────────────────┐
│  知识库（Knowledge Base）            │
├─────────────────────────────────────────┤
│  向量存储（Vector Store）         │
├─────────────────────────────────────────┤
│  检索器（Retriever）            │
├─────────────────────────────────────────┤
│  生成器（Generator）              │
└─────────────────────────────────────────┘
                 ↓
            [Reranker（重排序器）]
```

**技术选型**：

| 组件   | 推荐技术                | 适用场景       |
| ---- | ------------------- | ---------- |
| 知识库  | Postgres + pgvector | 本地向量搜索     |
| 向量存储 | Pinecone/Weaviate   | 托管向量 DB    |
| 检索器  | Hybrid Search       | 关键词 + 语义混合 |
| 生成器  | GPT-4/Claude        | 强大语言模型     |
| 重排序器 | Cross-Encoder       | 多路召回重排序    |

**最佳实践**：

- 分块检索：Chunk Size 512-1024 tokens
- 多路召回：关键词 + 语义 + 向量
- 动态检索：根据查询复杂度调整策略
- 增量更新：定期更新知识库内容

---

## 📚 二、Agent 开发

### 1. Agent 架构模式

*源自：[[LOL 团队 Agent：软件开发 Crew 设定]]*

**核心模式**：

- **单 Agent**：适用于简单任务（如数据查询、文本生成）
- **多 Agent 协作**：适用于复杂任务（如全栈开发、项目管理）
- **层级 Agent**：Manager Agent 协调多个子 Agent

**开发框架**：

| 框架              | 特点           | 适用场景   |
| --------------- | ------------ | ------ |
| LangChain       | 模块化组件库       | 快速原型开发 |
| AutoGPT         | 自动化 Agent 开发 | 聊天自然对话 |
| CrewAI          | 多 Agent 协作   | 软件开发团队 |
| Semantic Kernel | 语义理解 Agent   | 复杂推理任务 |

---

### 2. 工具调用设计

**核心原则**：

- **工具注册**：维护工具函数注册表
- **参数验证**：验证工具输入参数
- **错误处理**：优雅处理工具调用失败
- **结果解析**：结构化解析工具返回数据

**示例**：

```python
class ToolRegistry:
    def __init__(self):
        self.tools = {}
    
    def register(self, name, func, schema):
        self.tools[name] = {
            'func': func,
            'schema': schema
        }
    
    def call(self, tool_name, **kwargs):
        if tool_name not in self.tools:
            raise ValueError(f"Tool {tool_name} not found")
        
        tool = self.tools[tool_name]
        schema = tool['schema']
        
        # 参数验证
        validated_params = {}
        for param_name, param_info in schema['properties'].items():
            value = kwargs.get(param_name)
            if param_info.get('required') and value is None:
                raise ValueError(f"Missing required parameter: {param_name}")
            
            # 类型转换
            if 'type' in param_info:
                try:
                    validated_params[param_name] = param_info['type'](value)
                except:
                    validated_params[param_name] = value
        
        # 调用工具
        result = tool['func'](**validated_params)
        return result
```

---

### 3. Agent 测试策略

*源自：[[AI 时代工程师转型]] - Agent 测试部分*

**测试层次**：

```
┌─────────────────────────────────┐
│  功能测试               │
│  集成测试               │
├─────────────────────────────────┤
│  安全测试               │
├─────────────────────────────────┤
│  性能测试               │
└─────────────────────────────────┘
```

**测试要点**：

- **功能测试**：验证 Agent 是否正确完成任务
- **边界测试**：测试异常输入和错误处理
- **安全测试**：验证 Agent 不会调用禁止的工具
- **性能测试**：评估 Agent 响应时间和成本
- **集成测试**：测试 Agent 与工具的交互

---

## 📚 三、AI 系统集成

### 1. 规范驱动开发

*源自：[[Spec成为单一事实源]]*

**工作流**：

```
┌─────────────────────────────────┐
│  Spec 定义            │
│         ↓                │
│  测试用例生成            │
│         ↓                │
│  AI 生成实现            │
│         ↓                │
│  测试验证              │
│         ↓                │
│  代码审查              │
└─────────────────────────────────┘
```

**核心价值**：

- **单一事实源**：Spec 成为需求的唯一来源
- **意图对齐**：确保 AI 理解并实现业务需求
- **自动化测试**：基于 Spec 自动生成测试用例
- **持续验证**：通过测试持续验证 AI 生成代码

---

### 2. AI 能力评估框架

**评估维度**：

| 维度    | 指标              | 评估方法         | 目标值    |
| ----- | --------------- | ------------ | ------ |
| 准确性   | Precision       | 正确预测数 / 总预测数 | > 0.85 |
| 召回率   | Recall          | 正确召回数 / 总相关数 | > 0.80 |
| F1 分数 | F1 Score        | 精确排序的质量      | > 0.85 |
| 成本效益  | Token 成本 / 生成质量 | 高性价比         |        |
| 响应速度  | 平均 Latency      | < 3s         |        |

**评估流程**：

1. 定义评估数据集（包含典型用例）
2. 设计评估指标和评分标准
3. 使用自动化评估工具
4. 分析评估结果，识别改进点
5. 迭代优化提示词和系统

---

## 📚 四、常见问题与解决方案

### 1. Agent 产生幻觉

**问题**：AI 编造不存在的事实或信息

**解决方案**：

- 添加引用：要求 AI 输出信息来源
- 验证步骤：要求 AI 先验证再输出
- 使用工具：利用搜索工具验证事实

### 2. Agent 循环调用

**问题**：Agent 反复调用相同工具，导致资源浪费

**解决方案**：

- 调用历史：维护 Agent 的调用历史
- 重复检测：检测并阻止重复调用
- 超时保护：设置最大调用次数或时间限制

### 3. 工具调用失败

**问题**：工具调用失败导致 Agent 无法完成任务

**解决方案**：

- 优雅降级：工具失败时提供备选方案
- 错误恢复：提供重试机制
- 人工接管：关键失败时转给人工处理

---

## 📚 五、学习路径

### 初级路径（0-6 个月）

1. 学习提示词工程基础
2. 掌握 RAG 系统基本架构
3. 使用现成的 Agent 框架（LangChain）
4. 实现 1-2 个简单 Agent
5. 学习工具调用和 API 集成

### 中级路径（6-12 个月）

1. 深入 RAG 系统优化
2. 掌握多 Agent 协作模式
3. 实现 Manager Agent 和 Worker Agent
4. 掌握 Agent 测试策略
5. 精通 LangChain 和 AutoGPT

### 高级路径（1-2 年）

1. 设计和实现自定义 Agent 框架
2. 掌握 Agent 的性能优化
3. 实现企业级 Agent 系统
4. 掌握 Agent 安全和合规
5. 成为 AI Agent 架构师

---

## 🔗 参考资源

- [[AI 时代工程师转型]] - AI 工程思维与转型
- [[LOL 团队 Agent：软件开发 Crew 设定]] - Agent 团队协作模式
- [[Spec成为单一事实源]] - 规范驱动开发实践
- [[2020年代技术趋势 (2025更新版)]] - AI 时代技术趋势
