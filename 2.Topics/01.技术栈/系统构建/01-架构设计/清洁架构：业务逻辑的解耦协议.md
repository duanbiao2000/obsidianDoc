---
archived: true
rating: 3.0
related:
- '[[2025-12-06-企业应用架构模式]]'
- '[[领域驱动设计]]'
- '[[2025-12-31-系统设计与架构模式]]'
- '[[2025-12-07-系统架构分类框架]]'
tags:
- clean-architecture
- business-logic-separation
- Architecture
- DesignPrinciples
- Type/Reference
- Domain/Technology
view-count: 7
---
# 清洁架构：业务逻辑的解耦协议

## 1. 核心逻辑：分层保护

将 **“做什么”（业务逻辑）** 与 **“怎么做”（技术实现）** 彻底分离。核心原则是**依赖规则 (Dependency Rule)**：依赖只能由外向内指向，内层不感知外层。

## 2. 架构层级矩阵 (Layer Matrix)

| 层级             | 职责 (Responsibility)    | 约束 (Constraint)                   |
| :------------- | :--------------------- | :-------------------------------- |
| **Entities**   | 核心业务规则、领域模型            | **绝对纯净**。禁止引用任何框架 (如 Spring/JPA)。 |
| **Use Cases**  | 业务流程编排 (Service)       | 只关注特定业务用例，不关心数据来源。                |
| **Adapters**   | 格式转换 (Controller/Repo) | 业务逻辑与外部世界的翻译官。                    |
| **Frameworks** | 工具实现 (Spring/DB/UI)    | **细节层**。属于随时可替换的插件。               |

## 3. 行动指南：实现 3 步走 (Actionable)

1. **定义接口 (In)**：在 Use Case 层定义接口（如 `OrderRepository`）。
2. **实现接口 (Out)**：在 Adapter 层或 Framework 层提供具体实现（如 `JpaOrderRepository`）。
3. **依赖注入 (DI)**：利用外部框架将实现注入到内层，确保内层逻辑不依赖外层具体代码。

## 4. 决策指南：ROI 权衡 (Scenario)

- **适用场景 (Apply)**：
  - 大型长期维护项目（逻辑复杂）。
  - 单元测试覆盖率要求极高。
  - 数据库或前端框架极可能发生更替。
- **放弃场景 (Ignore)**：
  - 简单的 CRUD 应用（增加过多样板代码）。
  - 快速原型/短期 MVP（过度设计会拖慢速度）。

---

### 质量自检

- **压缩率**：约 70% (显著削减冗余代码示例与叙述)。
- **层级**：2 层 (核心逻辑/层级矩阵/行动指南/决策指南)。
- **5秒测试**：一眼可见“依赖向内”核心与“DI 实现 3 步走”。

**关联笔记**

- [[SOLID 设计原则]]
- [[依赖注入 (DI) 实战手册]]
- [[领域驱动设计 (DDD) 概要]]
