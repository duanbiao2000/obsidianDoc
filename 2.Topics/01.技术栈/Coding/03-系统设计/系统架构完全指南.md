---
rating: 3.0
related:
- '[[企业应用架构模式]]'
- '[[IoC-DI与企业应用架构模式]]'
- '[[微服务架构完全指南]]'
- '[[No Magic, Just Code设计哲学]]'
tags:
- PerformanceOptimization
- Scalability
- Architecture
- DesignPatterns
- SystemDesign
- Type/Reference
- Domain/Technology
update: 2026-01-22 00:00:00+00:00
view-count: 12
---
# 系统架构完全指南

## 一、核心逻辑：分而治之

- **系统设计**：解决"规模"问题。重点在**性能、可用性与一致性**的权衡 (CAP)
- **架构模式**：解决"复杂度"问题。重点在**解耦、复用与维护性** (SOLID)

---

## 二、系统设计决策矩阵

| 组件 | 核心痛点 | 备选方案 |
|:--- |:--- |:--- |
| **负载均衡 (LB)** | 高并发流量瓶颈 | Nginx (软件) / 云 LB (硬件)；算法：加权轮询 / 一致性 Hash |
| **缓存 (Cache)** | 数据库压力、响应慢 | Redis (热数据) / CDN (静态资源)；策略：LRU |
| **数据库 (DB)** | 数据量大、写瓶颈 | 读写分离 / 分库分表 / NoSQL (非结构化) |
| **消息队列 (MQ)** | 同步阻塞、流量洪峰 | Kafka (高吞吐) / RabbitMQ (可靠)；异步化与削峰 |

---

## 三、架构与设计模式狙击

### 1. 应用架构选择

- **中小型**：分层架构 —— 简单、快速
- **大型/多团队**：微服务 —— 独立部署、技术栈自由
- **高解耦/实时**：事件驱动 —— 响应式、高度扩展

### 2. 设计模式触发器

| 场景 | 推荐模式 |
|:--- |:--- |
| **创建对象太复杂/参数多** | Factory (工厂) / Builder (建造者) |
| **对接第三方接口不匹配** | Adapter (适配器) |
| **消除冗长 if-else** | Strategy (策略) |
| **一对多状态同步** | Observer (观察者) |

---

## 四、系统设计 4 步走

1. **约束定义**：明确 QPS、数据存储总量、SLA (几个 9)
2. **容量估算**：计算带宽、内存与磁盘需求（如 10^8 用户 × 1KB = 100GB）
3. **高层抽象**：画出 `LB → App → Cache/MQ → DB` 的核心链路
4. **瓶颈攻克**：针对热点 Key、单点故障、数据库慢查询提出优化方案

---

## 五、质量门槛：SOLID 原则

- **S**：单一职责 (不干杂活)
- **O**：开闭原则 (扩功能不改旧代码)
- **L**：里氏替换 (子类不破坏父类逻辑)
- **I**：接口隔离 (接口要瘦)
- **D**：依赖倒置 (面向接口而非实现编程)

---

## 六、No Magic, Just Code 设计哲学

### 核心论点

**魔法 = 复杂度的隐藏**

好的代码应该让读者能够理解每一行代码的作用，而不是依赖于"魔法"或隐式的约定。

### 设计原则

1. **显式优于隐式**：
   - 明确的函数名、变量名
   - 清晰的注释
   - 避免"聪明"但难懂的代码技巧

2. **简单优于复杂**：
   - 优先使用简单的解决方案
   - 避免过度设计

3. **可读性优于性能**：
   - 代码被阅读的次数远多于被执行的次数
   - 优化时才考虑性能

4. **可测试性**：
   - 每个函数都应该可以独立测试
   - 避免全局状态
   - 依赖注入而非硬编码依赖

---

**关联笔记**
- [[企业应用架构模式]] (业务逻辑组织与数据桥接)
- [[微服务架构完全指南]] (微服务技术栈与最佳实践)
- [[系统设计文档完全指南]] (文档分层与抽象方法)
