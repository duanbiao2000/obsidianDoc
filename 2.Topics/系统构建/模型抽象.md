---
view-count: 6
update: 2026-01-08 21:22
related:
  - "[[2025-12-11-视野分层]]"
  - "[[抽象层次分析器]]"
  - "[[恰当的抽象]]"
  - "[[精益生产Lean Manufacturing]]"
  - "[[主题追问问题生成器]]"
---

## 定义

**对业务核心逻辑进行高度提炼和形式化表达**

目的：构建清晰、稳定、可复用的概念模型，指导系统设计

---

## 核心要素

**1. 领域建模**
识别业务关键元素

- 实体 (Entities)
- 值对象 (Value Objects)
- 聚合根 (Aggregate Roots)
- 领域事件 (Domain Events)

**2. 概念提炼**
聚焦"做什么"非"怎么做"
剥离技术细节和实现噪声

**3. 边界划分**
明确模型适用上下文范围 (Bounded Context)
避免概念混淆

**4. 接口契约**
抽象模块交互契约 (API/事件协议)
松耦合、高内聚

**5. 支持演进**
核心模型保持稳定
底层技术/业务流程可变

---

## 价值

**核心价值 ★★★**

- 决定可理解性、可维护性、可扩展性
- 连接业务需求与技术实现
- 错误抽象 → 架构腐化、逻辑混乱
- 优秀抽象 → 团队统一语言协作

**简言之**
用最精炼、准确的概念结构，表达系统要解决的核心问题

---

## 实例：生鲜电商

**业务背景**
在线生鲜平台：时效性(当日达) + 库存准确性(防超卖) + 履约可靠性

**核心子域**

- 订单管理 (核心)
- 库存管理 (核心)
- 商品管理 (支撑)
- 支付 (通用)
- 配送调度 (核心)

---

### 领域元素

**实体 (Entities)**
有唯一标识、生命周期可追踪

| 实体            | 说明                      |
| ------------- | ----------------------- |
| Order         | 唯一订单号，状态可变(待支付→已发货→已完成) |
| Product       | 唯一ID，名称/分类/保质期          |
| InventoryItem | 关联商品ID+仓库，可售数量          |
| DeliveryTask  | 配送地址/时间窗/骑手分配           |

**值对象 (Value Objects)**
无唯一标识，属性值定义相等性

| 值对象        | 说明                 |
| ---------- | ------------------ |
| Money      | 金额+货币(CNY 99.00)   |
| Address    | 收货地址(省市区+详细)       |
| TimeWindow | 配送时间窗(14:00-16:00) |
| SKU        | 商品规格(苹果-红富士-500g)  |

**聚合根 (Aggregate Roots)**
聚合入口点，保证业务一致性边界

| 聚合根            | 包含                       | 不变性规则               |
| -------------- | ------------------------ | ------------------- |
| Order          | OrderItems+Address+Money | 总金额=各项价格×数量；未支付不可发货 |
| Inventory      | InventoryItem列表          | 扣减不能<0(防超卖)         |
| ProductCatalog | Product+SKU列表            | 下架商品不可被新订单引用        |

**领域事件 (Domain Events)**
已发生的业务事实，跨聚合通信

| 事件                | 触发时机 | 消费方         |
| ----------------- | ---- | ----------- |
| OrderPlaced       | 成功下单 | 库存服务、支付服务   |
| InventoryReserved | 库存预占 | 订单服务(更新状态)  |
| PaymentCompleted  | 支付成功 | 订单服务、配送调度服务 |
| OrderShipped      | 仓库出库 | 通知用户、启动配送   |

---

### 业务规则

**防超卖**
下单先 `ReserveInventory`(预占库存)，失败则订单创建失败

**时效履约**
30分钟未支付自动取消+释放库存

**一致性**
Saga模式或事件驱动最终一致性

---

### 限界上下文

| 上下文               | 职责      | 集成方式                                     |
| ----------------- | ------- | ---------------------------------------- |
| Order Context     | 订单生命周期  | 发布`OrderPlaced`<br>订阅`PaymentCompleted`  |
| Inventory Context | 库存预占/扣减 | 订阅`OrderPlaced`<br>发布`InventoryReserved` |
| Payment Context   | 支付请求/回调 | 订阅`OrderPlaced`<br>发布`PaymentCompleted`  |
| Delivery Context  | 配送任务安排  | 订阅`PaymentCompleted`<br>创建`DeliveryTask` |

---

### 技术实现

- 事件溯源 (Event Sourcing) / CQRS → 提升可追溯性
- 聚合根操作 → 事务一致性 (数据库事务/Saga补偿)
- 领域事件 → 消息队列异步传递 (Kafka/RabbitMQ)

---

## 总结

从真实业务出发，识别实体/值对象/聚合根/领域事件

构建**高内聚、低耦合、业务语义清晰**的领域模型

提升可维护性，为微服务拆分和系统演进奠定基础
