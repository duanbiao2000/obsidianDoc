---
view-count: 3
---
# 上下文工程 (Context Engineering)

**核心定义**：从对话引导员升级为**架构师**。通过结构化输入变量，锁定模型输出质量。

---

### 一、 初始层：元提示构建 (Initialization)
*在对话首条消息设定不可变更的“宪法”。*

#### 1. 宪法设定 (Constitutional Prompting)
**强制包含以下四要素：**
*   **角色 (Persona)**：具体身份 + 经验值 + 思考模型（例：20年经验麦肯锡顾问，第一性原理）。
*   **任务 (Mission)**：单一、具体的最终目标（例：制定中国市场咖啡品牌进入策略）。
*   **约束 (Constraints)**：
    *   *负向*：禁止用语（空洞词汇）、禁止臆造数据。
    *   *正向*：强制格式（【结论】+ 1-2-3论据）。
*   **边界 (Boundaries)**：明确知识库截止日期，超出范围需报错。

#### 2. 黄金范例 (Few-Shot Prompting)
**利用AI模式匹配能力。**
*   **输入**：典型用户提问。
*   **输出**：完美符合预期的回答（展示语气、深度、格式）。
*   **目的**：具象化抽象要求，降低指令理解偏差。

---

### 二、 运行层：动态管理 (Runtime Management)
*对抗上下文窗口限制与注意力漂移。*

#### 1. 上下文压缩 (Compression & Refresh)
**时机**：阶段性任务结束，进入下一环节前。
**指令**：
1.  总结当前共识与关键发现（限200字）。
2.  **丢弃**此前冗余对话，仅基于总结进行下一步。
**目的**：清洗“上下文噪音”，释放Token空间，防止逻辑遗忘。

#### 2. 强制思维链 (Chain of Thought - CoT)
**指令**：禁止直接输出答案，强制展示推理步骤。
**结构**：
1.  正向论点列举。
2.  反向论点列举。
3.  加权评估标准。
4.  最终建议。
**目的**：白盒化推理过程，便于定位逻辑断点并修正。

---

### 三、 输出层：迭代优化 (Output Refinement)
*拒绝模糊指令（如“再改改”）。*

#### 1. 量化评分迭代 (Rubric-Based Iteration)
**指令**：让AI扮演“严格编辑”自查。
**维度**：
*   逻辑闭环度 (0-10分)
*   数据支撑力 (0-10分)
*   信息信噪比 (0-10分)
**动作**：输出评分表 $\to$ 指出扣分项 $\to$ 输出修正版。
