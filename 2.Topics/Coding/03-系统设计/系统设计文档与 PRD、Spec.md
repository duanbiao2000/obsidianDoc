---
view-count: 7
update: 2026-01-07 00:24
related:
  - "[[Spec-Driven Development（规格驱动开发）]]"
  - "[[文档化Planning]]"
  - "[[2025-12-06-企业应用架构模式]]"
---

## 系统设计文档与 PRD、Spec 协作架构

**核心逻辑：** 通过文档分层解耦业务价值、技术架构与实现细节，实现从需求到代码的确定性映射。

### 1. 分析 (Analysis)

本笔记的核心主张是：**软件质量取决于产品价值、架构蓝图与实现细节之间的逻辑连续性。**

- **递进关系：** 业务需求 $\xrightarrow{PRD}$ 系统设计 $\xrightarrow{Spec}$ 开发实现。
- **职责解耦：** PRD 定义“做什么”（PM 负责），系统设计确定“怎么架”（架构师负责），Spec 落实“怎么写”（开发负责）。
- **价值闭环：** PRD 保证商业对齐，系统设计控制技术风险，Spec 提升并行开发效率。
- **复杂度适应性：** 文档深度应与系统风险成正比；简单项目可采用“两层模式”压缩流程。

### 2. 抽象 (Abstraction)

- **复杂度隔离原则：** 在不同认知层级设定边界。PM 无需理解 Redis 锁，开发无需反复确认商业逻辑。
- **契约锁定模式：** 并行开发的前提是“契约（Spec）”的预先锁定。
- **架构决策前置：** 在 Spec 编写前完成关键选型，可将技术瓶颈的发现成本从“开发阶段”左移至“设计阶段”。

### 3. 结构化 (Structure)

**输入 $\to$ 价值定义 $\to$ 架构映射 $\to$ 实现规格 $\to$ 输出**

- **输入：** 原始业务需求（Entropy）
- **PRD：** 用户场景 + 成功指标（Target）
- **系统设计：** 模块依赖 + 数据流 + 决策决策（Blueprint）
- **Spec：** API 定义 + 表结构 + 业务逻辑（Implementation）
- **输出：** 高质量交付物（Code）

### 4. 应用 (Application)

#### 决策规则 (Decision Rules)

- **IF** 涉及金融支付、高并发或跨团队复杂系统：**THEN** MUST 执行完整三层文档协议。
- **IF** 处于初创期、内部工具或低风险迭代：**THEN** 可采用“轻量 PRD + 代码即文档（Swagger/Figma）”的两层模式。

#### 核心检查清单 (Checklist)

- [ ] **PRD 环节：** 核心指标（KPI）是否具备可度量性？
- [ ] **系统设计环节：** 是否包含了架构图、关键决策（SQL/NoSQL）及其非功能性需求（性能/安全）？
- [ ] **Spec 环节：** API 接口（REST/GraphQL）与数据表索引设计是否已锁定？
- [ ] **同步校验：** Spec 的细节是否完美覆盖了 PRD 中的业务边界？
