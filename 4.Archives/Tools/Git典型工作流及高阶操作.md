---
aliases: ğŸ”„ 13ä¸ªGitè¶…é€ŸæŠ€å·§ï¼šå¿«é€Ÿæå‡ä½ çš„å¼€å‘æµç¨‹
date: 2024-11-10 19:41
categories:
  - Effective
tags:
  - Domain/Creativity/Github
  - Status/Workflow
update: 2024-11-10 20:08
view-count: 8
---
# [[Gitå…¸å‹å·¥ä½œæµåŠé«˜é˜¶æ“ä½œ]] | Minimal

---

## 0. æœ¬è´¨ (The Essence)
- **Git ä¸æ˜¯å­˜æ¡£å·¥å…·**ï¼Œè€Œæ˜¯åä½œçš„æ—¶é—´æœºå™¨ã€‚
- **æ ¸å¿ƒç›®æ ‡**ï¼šç»´æŒä¸€æ¡æ¸…æ™°ã€çº¿æ€§ã€å¯è¿½æº¯çš„é€»è¾‘å†å²ã€‚
- **æœ€é«˜åŸåˆ™**ï¼šåˆ†æ”¯çŸ­å°ç²¾æ‚ï¼ŒHistory ç»å¯¹æ•´æ´ã€‚

---

## 1. æ ¸å¿ƒåœºæ™¯é€ŸæŸ¥

| åœºæ™¯ | æ ¸å¿ƒå·¥å…· | ä»·å€¼ | åæ§½ |
| :--- | :--- | :--- | :--- |
| **è¶…å¤§ä»“åº“** | `sparse-checkout` | åªæ£€å‡ºéœ€è¦çš„ç›®å½•ï¼Œæé€Ÿ 10x | æ²»å¥½ Monorepo çš„è‚¥èƒ–ç—‡ |
| **æƒé™ç®¡ç†** | `CODEOWNERS` | æ˜ç¡®æ¨¡å—è´Ÿè´£äººï¼Œé˜²æ­¢ä¹±æ”¹ | è°çš„ä»£ç è°ç­¾å­— |
| **åˆ†æ”¯ç­–ç•¥** | `Trunk-based` | æŠ›å¼ƒé•¿æœŸåˆ†æ”¯ï¼Œå‡å°‘åˆå¹¶åœ°ç‹± | å¼€å‘è€…çš„çœŸè‡ªç”± |
| **ä»£ç æäº¤** | `rebase -i` | æ•´ç† commit å†å²ï¼Œå‹ç¼©ç¢ç‰‡ | æ‹’ç» "fix typo" åˆ·å± |
| **è·¨åº“ä¾èµ–** | `submodule` | ç‰ˆæœ¬å¼ºç»‘å®š (Pinning) | å”¯ä¸€èƒ½ç”¨çš„å¤šåº“åè°ƒæ–¹æ¡ˆ |
| **æ‰æ¼å®šä½** | `bisect` | äºŒåˆ†æŸ¥æ‰¾å¼•å…¥ bug çš„ commit | è‡ªåŠ¨åŒ–â€œèƒŒé”…ä½â€æŸ¥è¯¢ |

---

## 2. é€»è¾‘éª¨æ¶ (Minimal Commands)

### **A. æé€Ÿ Monorepo (åªçœ‹éƒ¨åˆ†ä»£ç )**
```bash
git config core.sparseCheckout true
echo "services/auth/" >> .git/info/sparse-checkout
git checkout main
```

### **B. èŒä¸šé€‰æ‰‹çš„ Commit æ•´ç†**
```bash
git add -p                 # äº¤äº’å¼æš‚å­˜ï¼Œåªæäº¤è¯¥æäº¤çš„
git rebase -i develop      # å‹ç¼© (squash) æˆ–é‡å‘½å (reword)
git push --force-with-lease # å®‰å…¨çš„å¼ºåˆ¶æ¨é€
```

### **C. ç´§æ€¥ Bug ä¿®å¤ (Cherry-pick)**
```bash
git checkout main
git cherry-pick <commit_id> # åªæŠŠç‰¹å®šçš„è¡¥ä¸æŠ“è¿‡æ¥
```

### **D. ç¯å¢ƒå¤§æ‰«é™¤ (æ€§èƒ½)**
```bash
git gc --aggressive        # æ·±åº¦å‹ç¼©å¯¹è±¡åº“
git maintenance start      # å¼€å¯åå°è‡ªåŠ¨ç»´æŠ¤
```

---

## 3. é¿å‘æŒ‡å— (Brutal Truths)

- **Merge æ˜¯åŸç½ª**ï¼šåœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šå°½é‡ä½¿ç”¨ `rebase` åŒæ­¥ä¸»å¹²ï¼Œé¿å…äº§ç”Ÿæ¯«æ— æ„ä¹‰çš„ "Merge branch..." å™ªéŸ³ã€‚
- **Commit ä¸æ˜¯åƒåœ¾æ¡¶**ï¼šä¸€ä¸ªé€»è¾‘æ”¹åŠ¨ = ä¸€ä¸ª Commitã€‚è¶…è¿‡ 200 è¡Œçš„æäº¤æ˜¯ä»£ç å®¡æŸ¥è€…çš„å™©æ¢¦ã€‚
- **Force Push çš„çº¢çº¿**ï¼šç¦æ­¢åœ¨å…¬å…±åˆ†æ”¯ï¼ˆmain/developï¼‰å¼ºåˆ¶æ¨é€ï¼›åœ¨ä¸ªäººåˆ†æ”¯ä½¿ç”¨ `--force-with-lease`ã€‚
- **è‡ªåŠ¨åŒ–é’©å­**ï¼šæ²¡æœ‰ `pre-commit` æ ¡éªŒï¼ˆLinter/Formatï¼‰çš„æµç¨‹éƒ½æ˜¯å‡æµç¨‹ã€‚
- **Submodule å¿…é¡»å›ºå®šç‰ˆæœ¬**ï¼šæ°¸è¿œä¸è¦åœ¨å­æ¨¡å—é‡Œè·Ÿè¸ª `latest`ï¼Œå¿…é¡»æŒ‡å‘å…·ä½“çš„ `commit_id` æˆ– `tag`ã€‚

---

## 4. åä½œå†³ç­–æ ‘

1. **åŒæ­¥ä¸»å¹²ä»£ç ï¼Ÿ**
    - ä¸ªäººåˆ†æ”¯ â†’ `git rebase origin/main`ã€‚
    - å…¬å…±åˆ†æ”¯ â†’ `git pull --rebase`ã€‚
2. **å¤„ç†çº¿ä¸Šç´§æ€¥ Bugï¼Ÿ**
    - æ— æ³•å›æ»š â†’ `git revert` (ä¿ç•™é”™è¯¯ç°åœºï¼Œå¢åŠ ä¿®æ­£è®°å½•)ã€‚
    - éœ€è¦ä»å¼€å‘åˆ†æ”¯æŠ½ç¦» â†’ `git cherry-pick`ã€‚
3. **å¯»æ‰¾éšè—å¾ˆä¹…çš„ Bugï¼Ÿ**
    - é€»è¾‘å¤æ‚ â†’ `git bisect` (å†™ä¸ªæµ‹è¯•è„šæœ¬å…¨è‡ªåŠ¨æŸ¥æ‰¾)ã€‚

---

## 5. Commit è§„èŒƒæ¸…å• (Angular Style)

- [ ] **Type**: `feat` (æ–°åŠŸèƒ½), `fix` (ä¿® bug), `refactor` (é‡æ„), `chore` (é…ç½®)ã€‚
- [ ] **Scope**: å—å½±å“çš„æ¨¡å—åï¼Œå¦‚ `(auth)`, `(api)`ã€‚
- [ ] **Body**: è§£é‡Šâ€œä¸ºä»€ä¹ˆâ€è¿™ä¹ˆæ”¹ï¼Œè€Œä¸æ˜¯â€œæ”¹äº†ä»€ä¹ˆâ€ã€‚
- [ ] **Footer**: å…³è” Jira ä»»åŠ¡å·æˆ–ä¿®å¤çš„ Issue IDã€‚

---

**åŸåˆ™**ï¼šä»£ç æ˜¯ç»™äººçœ‹çš„ï¼ŒGit å†å²ä¹Ÿæ˜¯ã€‚ä¿æŒæ•´æ´æ˜¯ä¸“ä¸šå¼€å‘è€…çš„åº•çº¿ã€‚