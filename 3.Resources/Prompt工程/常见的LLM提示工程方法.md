---
view-count: 13
related:
  - '[[AI 时代工程师转型]]'
  - '[[实战-逆向工程提示词解构]]'
  - '[[Prompt Pattern]]'
tags:
  - prompt-optimization
  - thought-path-activation
  - PromptEngineering
  - AI
  - Domain/AI/PromptEngineering
  - Domain/AI/LLM
  - Type/Reference
---
## 0. 本质 (The Essence)

- **提示工程 = 强制慢思考**。通过结构化规范，将人类的模糊意图转化为 AI 的执行指令。
- **核心逻辑**：不是“写文字”，而是“编排思维路径”。提示技术是激活模型潜能，而非创造新能力。

---

## 1. 核心架构 (The Hierarchy)

| 层次           | 包含技术                                     | 核心功能       | 模拟人类认知          |
| :----------- | :--------------------------------------- | :--------- | :-------------- |
| **L1: 基础设定** | 系统 / 角色 / 上下文                            | 定义“我是谁”与边界 | 任务心智模型          |
| **L2: 思维引导** | CoT / Step-Back / ToT / Self-Consistency | 定义“如何思考”   | 逻辑推理 (System 2) |
| **L3: 行动扩展** | ReAct                                    | 定义“如何行动”   | 具身认知 (思考+工具)    |

---

## 2. 技术审计 (The Audit)

| 技术                   | Token 消耗 | 延迟 | 核心失败模式        | 避坑              |
| :------------------- | :------- | :- | :------------ | :-------------- |
| **CoT**              | 高        | 中  | 错误累积、事后合理化    | 检查每步逻辑而非只看结果    |
| **Step-Back**        | 中        | 中  | 抽象过头，无法落地     | 选对抽象层级          |
| **ToT**              | 极高       | 极高 | 搜索空间爆炸        | 必须有严厉的剪枝策略      |
| **Self-Consistency** | 极高       | 高  | 集体选错 (模型能力上限) | 模型不行，采样 100 次也错 |
| **ReAct**            | 不定       | 不定 | 工具调用死循环       | 严控工具边界与异常处理     |

---

## 3. 逻辑骨架 (Minimal Logic)

- **组合公式**：`基础三件套 (L1) + 思维策略 (L2) + 行动循环 (L3)`
- **CoT 本质**：`Plan 分解 (Spec 结构)`
- **ToT 本质**：`多方案探索 (设计文档备选项)`
- **Self-Consistency 本质**：`多人评审 (Plan Review)`

---

## 4. 避坑指南 (Brutal Truths)

- **抽象泄露**：提示技术无法完全屏蔽底层模型缺陷。模型太笨，再强的 PE 也是“精致的垃圾”。
- **展示推理 ≠ 逻辑正确**：CoT 可能只是在“假装思考”。中间步骤的流畅度具有欺骗性。
- **过拟合陷阱**：不要针对单一案例过度调优 Prompt，那是在治标而非治本。
- **成本曲线**：准确率的提升往往伴随着 Token 成本的指数级增长。

---

## 5. 决策树

1. **需要外部数据/工具？**
   - 是 → **ReAct**。
2. **任务需要多步逻辑推理？**
   - 是 → **CoT**。
   - 且 错误成本极高？ → **Self-Consistency**。
3. **需要探索多种可能路径？**
   - 是 → **ToT** 或 **Step-Back**。
4. **都不是？**
   - → **L1 基础三件套** (系统 + 角色 + 上下文)。

---

**原则**：简单任务不加戏。提示工程是为了解决复杂度，不是为了炫耀技术。

# 提示词工程（Prompt Engineering）核心方法：极简版

### 1. 基础逻辑类

- **CoT (Chain of Thought)**：**分步推导**。拆解逻辑 $\rightarrow$ 模拟人类思考。
- **Rephrase**：**语义对齐**。改写描述 $\rightarrow$ 消除歧义。
- **Step-back**：**抽象本质**。先升维思考本质 $\rightarrow$ 再回归具体任务。

### 2. 自动化与目标类

- **APE (Automatic Prompt Optimization)**：**自动迭代**。反馈验证 $\rightarrow$ 减少人工调参。
- **OPRO (Optimization Prompt)**：**目标驱动**。最大化特定指标 $\rightarrow$ 效果导向设计。
- **PromptGen**：**批量生成**。变体产出 $\rightarrow$ 择优筛选。

### 3. 进化与自举类

- **PromptBreeder**：**生物进化**。变异 + 繁殖 $\rightarrow$ 多代进化提示词。
- **SPO (Structured Prompt Optimization)**：**闭环自举 (Bootstrapping)**。模型自演“工程师 + 执行者 + 裁判” $\rightarrow$ 迭代优化。

---

### SPO 算法深挖 (Algorithm 1)

**核心机制：LLM 自我迭代闭环**

1. **初始化**：设定初始提示词 $P_0$ + 考题数据集 $D$。
2. **迭代循环 ($N_{max}$ 次)**：
   - **$\phi_{opt}$ (优化)**：模型反思旧提示词与答案 $\rightarrow$ 生成新提示词 $P'$。
   - **$\phi_{exe}$ (执行)**：使用新提示词跑题 $\rightarrow$ 产出新答案 $A'$。
   - **$\phi_{eval}$ (评估)**：模型自任裁判 $\rightarrow$ 比较新旧答案优劣。
3. **更新**：若评估成功 $\rightarrow$ 替换最佳提示词 $P^*$。
4. **产出**：输出进化后的结构化提示词。

**结论**：SPO 是将 **“手动调优”** 封装为 **“模型自动化反思”** 的递归工厂。
