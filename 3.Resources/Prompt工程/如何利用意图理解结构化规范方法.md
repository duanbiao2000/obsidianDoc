---
aliases: null
date: 2025-09-02 16:29
tags:
  - intent-to-spec-pipeline
  - protocol-matrix
  - AI
  - KnowledgeManagement
source:
  - https://zread.ai/HKUDS/DeepCode/6-whats-the-buzz
view-count: 6
---
## 1. 核心逻辑：意图-规范流水线 (Intent-to-Spec Pipeline)

**系统失效模式 (System Failure Mode)：**
- **路径 A (Default)**：模糊需求 $\rightarrow$ AI 猜测 $\rightarrow$ 低质量输出 $\rightarrow$ 反复回滚 (Rollback)。
- **路径 B (Optimized)**：模糊需求 $\rightarrow$ **意图解析** $\rightarrow$ **结构化规范** $\rightarrow$ 高质量输出。

**认知转换：** 将 AI 从“执行者”提升为“对齐者”。在编译代码前，先编译“需求协议”。

## 2. 协议矩阵：三种执行模式 (Protocol Matrix)

| 模式 | 操作算法 (Algorithm) | 适用场景 |
| :--- | :--- | :--- |
| **M1: 预编码 (Manual)** | 用户手动执行 `Intent -> Spec`。 | 需求明确，追求 $O(1)$ 产出。 |
| **M2: 递归澄清 (Recursive)** | 触发 AI 进入“意图理解智能体”模式，进行 $T+N$ 轮追问。 | 需求模糊，探索系统边界。 |
| **M3: 模板约束 (Template)** | 强制填充 `Requirement_Schema`。 | 高频任务，标准化团队协作。 |

## 3. 结构化 Schema 框架 (The Template)

针对技术专业人士的提示词元数据：

| 变量组 | 核心参数 (Metadata) | 逻辑权重 |
| :--- | :--- | :--- |
| **目标 (Goal)** | `One-sentence Definition`, `Success Criteria` | 决定系统的收敛方向。 |
| **约束 (Constraints)** | `Tech Stack`, `Resource Limit`, `Safety/Security` | 锁定搜索空间，避免无效解。 |
| **功能优先级** | `P0 (Must-have)`, `P1 (Should-have)`, `P2 (Nice-to-have)` | 确定迭代的原子序列。 |
| **输出规范** | `Code Style`, `Test Coverage`, `Documentation` | 强制 AST 级的合规性。 |

## 4. 执行指南 (Execution Protocol)

### **启动指令 (The Bootstrap Prompt)**
> “在执行任务前，请先充当‘意图理解智能体’：
> 1. 列出你对当前需求的逻辑映射。
> 2. 识别系统中的歧义点与隐性假设。
> 3. 提出 3-5 个硬性澄清问题。
> **等待我确认后再进入生成阶段。**”

### **性能优化 (Performance Tuning)**
- **降噪**：禁止 AI 猜测。若参数不足，强制挂起进程并报错。
- **解耦**：将“想清楚”与“做出来”分属于不同的上下文窗口或智能体。

## 5. 多智能体架构参考 (Architecture Reference)

**DeepCode 架构解构：**
- **意图理解智能体 (Intent Agent)**：解析 Text $\rightarrow$ Spec（核心）。
- **规划智能体 (Planning Agent)**：Spec $\rightarrow$ Workflow。
- **生成智能体 (Coder Agent)**：Workflow $\rightarrow$ Executable Code。

## 关联笔记
- [[文档化Planning]] (理解记录意图的底层逻辑) [^1]
- [[原则驱动行动]] (KISS/YAGNI 原则在需求定义中的应用) [^2]
- [[Python代码注释规范自适应提示词]] (结构化元数据约束的实践) [^3]
- [[2025-12-30-跨领域播客 Transcript 快速框架构建法]] (对原始数据进行骨架提取的逻辑) [^4]
