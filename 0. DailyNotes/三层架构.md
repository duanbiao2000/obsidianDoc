---
aliases: 
source: 
author: 
date: 
update: 
categories: 
important: false
tags:
  - Tech/Code
---

### 各层之间的交互

1. **用户发起请求**：用户通过浏览器或其他客户端发送请求到 controller 层。
2. **controller 处理请求**：controller 层接收请求，调用相应的 service 层方法。
3. **service 执行业务逻辑**：service 层根据业务逻辑，调用 domain 层的模型和 repository 层的方法。
4. **repository 操作数据库**：repository 层通过 mapper 层执行 SQL 语句，将数据持久化到数据库或从数据库中读取数据。
5. **service 返回结果**：service 层将处理结果返回给 controller 层。
6. **controller 返回响应**：controller 层将结果封装成 HTTP 响应，返回给客户端。

### 各层的作用总结

| 层级         | 职责        | 与其他层的关系                    |
| ---------- | --------- | -------------------------- |
| controller | 接收请求，返回响应 | 调用 service                 |
| service    | 实现业务逻辑    | 调用 domain 和 repository     |
| repository | 数据持久化     | 调用 mapper                  |
| mapper     | SQL 映射    | 被 repository 调用            |
| domain     | 定义领域模型    | 是 service 和 repository 的基础 |
### 举例

以一个简单的用户注册功能为例：

- **controller**：接收用户提交的注册信息，调用 `UserService` 的 `registerUser` 方法。
- **service**：验证用户信息，创建 `User` 对象（domain 层），调用 `UserRepository` 的 `save` 方法将用户保存到数据库。
- **repository**：通过 `UserMapper` 将 `User` 对象映射成 SQL 语句，执行插入操作。
- **domain**：`User` 类定义了用户的属性和行为。





