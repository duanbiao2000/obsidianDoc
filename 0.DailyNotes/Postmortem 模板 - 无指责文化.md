

编写一份清晰、全面的 Postmortem（事后复盘）模板是任何高效技术团队的关键实践。Postmortem 的目的不是指责，而是**从事件中学习，防止未来再次发生类似问题，并改进系统和流程**。一个好的 Postmortem 模板能确保你捕获所有关键信息，并围绕解决方案和预防措施进行有效沟通。

以下是一个标准 Postmortem 模板，包含了通常需要涵盖的所有核心部分。你可以根据团队的具体需求和事件的复杂性进行调整。


### **Postmortem 模板**

---

### **1. 基本信息 (Basic Information)**

- **事件标题 (Incident Title):** 简洁描述事件，例如：“API 服务高延迟”或“数据库写入失败”。
- **事件 ID (Incident ID):** 内部事件跟踪系统的 ID（如果适用）。
- **报告日期 (Date of Report):** `YYYY-MM-DD`
- **事件发生日期和时间 (Incident Start Date & Time):** `YYYY-MM-DD HH:MM:SS UTC/Local Time`
- **事件结束日期和时间 (Incident End Date & Time):** `YYYY-MM-DD HH:MM:SS UTC/Local Time`
- **总持续时间 (Total Duration):** `X 小时 Y 分钟 Z 秒` (从发现到完全恢复的时间)
- **检测时间 (Detection Time):** `X 分钟` (从事件开始到被检测到的时间)
- **恢复时间 (Recovery Time - MTTR):** `X 分钟` (从检测到完全恢复的时间)
- **受影响的服务/组件 (Affected Services/Components):** 列出所有直接或间接受影响的服务、模块或系统。
- **事件负责人 (Incident Lead/On-Call):** 负责处理和协调事件的人员。
- **编写人 (Author(s)):** 编写此 Postmortem 的人员。
- **审核人 (Reviewer(s)):** 审核此 Postmortem 的人员。

---

### **2. 事件概述 (Executive Summary)**

- **简要描述 (Brief Description):** 用 2-3 句话概括发生了什么，造成了什么影响，以及最终如何解决。
- **根本原因简述 (Brief Root Cause):** 扼要说明导致事件发生的核心问题。
- **业务影响简述 (Brief Business Impact):** 概述对用户、收入、SLA 等造成的影响。
- **学到的主要教训 (Key Lesson Learned):** 最重要的收获。

---

### **3. 事件时间线 (Timeline of Events)**

- **详细时间点 (Detailed Chronology):** 按时间倒序或正序详细列出事件发生、检测、响应和解决的关键时间点和行动。
    - **`YYYY-MM-DD HH:MM:SS` UTC/Local Time:** 事件描述 (谁做了什么，发生了什么，系统状态变化)。
    - **`YYYY-MM-DD HH:MM:SS` UTC/Local Time:** ...
    - **示例:**
        - **`2024-06-15 10:00:00`**: 服务A 的延迟监控首次触发 P99 报警。
        - **`2024-06-15 10:05:00`**: 值班工程师收到报警并开始调查。
        - **`2024-06-15 10:15:00`**: 确认数据库连接池耗尽导致延迟。
        - **`2024-06-15 10:20:00`**: 尝试重启服务A，未能解决。
        - **`2024-06-15 10:30:00`**: 决定回滚上次数据库配置变更。
        - **`2024-06-15 10:45:00`**: 配置回滚完成，服务延迟恢复正常。
        - **`2024-06-15 11:00:00`**: 事件解决，确认服务稳定。

---

### **4. 根本原因分析 (Root Cause Analysis)**

- **问题描述 (Problem Description):** 详细描述事件的技术细节。它是什么，它是如何表现的，它如何影响了系统？
- **直接原因 (Direct Cause):** 导致事件直接发生的技术故障或操作失误。
- **根本原因 (Root Cause):** **为什么**直接原因会发生？通常涉及更深层次的系统设计、流程、工具或人为因素问题。可以使用 5 Why 方法或鱼骨图等工具进行分析。
    - **例如:** 配置管理工具缺陷，导致不当配置发布；监控缺失导致问题无法早期发现；变更管理流程不足；知识共享不足等。
- **促成因素 (Contributing Factors):** 导致事件恶化、延长或更难解决的其他因素（非根本原因）。
    - **例如:** 紧急值班人员不熟悉该系统；报警信息不明确；回滚机制不完善；测试覆盖不足。

---

### **5. 业务影响 (Business Impact)**

- **谁受影响 (Who was Impacted)?** 用户、客户、内部团队、合作伙伴？
- **具体影响 (Specific Impact):**
    - **客户影响:** 多少用户受影响？多长时间？数据丢失？用户体验下降？
    - **财务影响:** 潜在收入损失？退款？合规罚款？
    - **SLA 影响:** 是否违反了任何服务等级协议 (SLA) 或服务等级目标 (SLO)？具体违反了哪些指标？
    - **品牌声誉影响:** 是否有负面新闻或社交媒体讨论？
- **量化影响 (Quantified Impact):** 尽可能使用数字和指标来量化影响（例如，`X`% 的用户在 `Y` 分钟内无法访问，损失 `Z` 美元收入）。

---

### **6. 恢复措施 (Remediation Actions)**

- **事件期间采取的措施 (Actions Taken During Incident):** 在事件处理过程中，为缓解和恢复服务所执行的具体操作。
    - 例如：重启服务，回滚部署，禁用功能，增加资源。
- **缓解措施的有效性 (Effectiveness of Mitigation):** 评估这些措施是否有效，以及它们在多大程度上帮助了恢复。

---

### **7. 经验教训与行动项 (Lessons Learned & Action Items)**

- **学到的教训 (Lessons Learned):** 从本次事件中学到了什么？
    - **我们做了什么好的？** (What went well?) - 值得肯定和推广的方面。
    - **我们能改进什么？** (What could be improved?) - 需要改进的领域。
- **预防措施 (Preventative Actions):** 为防止此类事件再次发生而需要采取的措施。
    - **技术改进:** 代码重构、架构优化、新的监控点、自动化工具、更好的测试覆盖。
    - **流程改进:** 变更管理流程、发布流程、值班轮换、故障演练。
    - **知识共享/培训:** 文档更新、团队培训、知识库建设。
- **遗留任务/待办事项 (Follow-up Tasks/Backlog Items):** 具体、可执行、可衡量且有截止日期的行动项。**为每个行动项指定负责人和预计完成日期。**
    - **`[负责人] [任务描述]`**: 预期完成日期。
    - **示例:**
        - `[张三]`：增加数据库连接池告警，阈值设置为 80% 利用率。`2024-06-25`
        - `[李四]`：更新服务 A 的回滚文档，包含数据库配置回滚步骤。`2024-06-28`
        - `[王五]`：研究服务 A 的数据库连接池自动扩容方案。`2024-07-15`
        - `[团队]`：安排一次关于数据库连接池管理的内部培训。`2024-07-30`

---

### **8. 附录 (Appendix)**

- **相关链接 (Relevant Links):**
    - 监控图表链接 (Monitoring Graphs)
    - 日志链接 (Log Traces)
    - 报警事件链接 (Alert Incident Link)
    - 任务追踪系统链接 (Jira/Asana/GitHub Issue)
    - 相关代码变更 (Relevant Code Changes)
    - 其他支持文档

---

### **Postmortem 的目标和精神**

- **无指责文化 (Blameless Culture):** 重点是**发生了什么**，而不是**谁**导致了它。鼓励团队成员坦诚地分享信息，而不是担心受惩罚。
- **学习和改进:** 核心目的是从失败中汲取教训，并实施改变以提高系统弹性。
- **透明度:** 向所有相关方（包括客户，如果适用）坦诚地沟通事件及其解决方案。
- **行动导向:** 确保 Postmortem 的结果是具体的、可跟踪的行动项，而不是仅仅停留在纸面上的分析。

通过遵循这个模板，你的团队可以系统地处理和学习每个生产事件，从而不断提高系统的稳定性、可靠性和运维效率。