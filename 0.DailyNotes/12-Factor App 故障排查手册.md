---
view-count: 6
---


### ★ 一、总体故障观（Meta）
- ★ 故障≠异常 → 故障=设计必然
- ★ 可恢复性>不出错 → 系统假设会失败
- △ 配置可变 代码不变 → 降低环境耦合
- ★ 自动化优先 → 人是最大不确定性

---

### ★ 二、配置与环境类（Config / Env）
- ★ 配置入环境变量 → 避免硬编码
- ❗ 配置漂移 → 故障根源
- △ 环境一致性 → Dev≠Prod=必炸
- ★ 密钥即配置 → 泄露=系统级事故

---

### ★ 三、依赖与构建类（Dependencies / Build）
- ★ 显式声明依赖 → 隐式=不可复现
- ★ 构建-发布-运行分离 → 回滚可控
- △ 构建不可变 → Debug有锚点
- ❗ 热修代码 → 技术债加速器

---

### ★ 四、运行时与进程模型（Processes）
- ★ 无状态进程 → 可水平扩展
- ★ 进程短命 → 崩溃可接受
- △ 崩溃即重启 → 自愈机制
- ❗ 本地状态 → 扩展性杀手

---

### ★ 五、服务与依赖交互（Backing Services）
- ★ 外部服务即资源 → 随时可替换
- △ 连接失败常态化 → 必须重试/熔断
- ❗ 服务假定稳定 → 级联故障源
- ★ 超时>等待 → 防止阻塞放大

---

### ★ 六、并发与扩展（Concurrency / Scalability）
- ★ 进程扩展而非线程 → 结构清晰
- △ 扩展=增加实例 → 非加机器规格
- ❗ 垂直扩展 → 成本指数上升
- ★ 幂等性 → 并发安全基石

---

### ★ 七、日志与可观测性（Logs）
- ★ 日志是事件流 → 非文件
- ★ 标准输出 → 平台接管
- △ 日志≠监控 → 只回答“发生了什么”
- ❗ 无结构日志 → 排障噩梦

---

### ★ 八、管理任务与调试（Admin / Debug）
- ★ 管理任务=一次性进程 → 与主服务同配置
- △ 线上调试最小化 → 防止人为事故
- ❗ 手工修Prod → 不可复现
- ★ 自动脚本 → 知识固化

---

## ★ 故障排查终极模型（12-Factor版）
- ★ 问题定位顺序：
  配置 → 依赖 → 进程 → 服务 → 并发 → 日志
- ★ 核心信条：
  **能自动恢复的系统，才配上线**
- ❗ 反模式总结：
  “在Prod手改配置 + 本地状态 + 无日志”

