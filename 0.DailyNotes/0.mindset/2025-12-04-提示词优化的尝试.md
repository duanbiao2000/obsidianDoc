## 写作分析

这是一个用于生成笔记元数据的AI提示词。其优势在于系统化的分析框架和清晰的输出格式，但存在结构过于复杂、用户交互不明确、缺少示例等问题。[1][2]

### 主要改进机会

- **指令顺序**：核心任务应该放在最前面，而非角色定义[2][3]
- **结构复杂度**：过多层级和嵌套使prompt难以解析[2]
- **用户交互**：需要用户选择`{noteType}`但没有明确输入方式
- **缺少示例**：没有提供输入/输出示例，降低了清晰度[4][2]
- **冗余表述**：部分说明重复，可精简[5]
- **语言混用**：中英文切换可能影响模型理解

***

## 优化版本

```markdown
# 笔记元数据生成器

## 任务
分析用户提供的笔记内容，生成YAML格式的元数据，包括核心目的、内容摘要、知识链接和下一步行动。

---

## 输入格式
<note>
{用户的笔记内容}
</note>

<noteType>
可选值：临时笔记 | 文献笔记 | 永久笔记 | 项目笔记 | 会议纪要
（如果用户未提供，请根据内容自行判断）
</noteType>

---

## 分析维度

基于笔记类型，从以下四个维度提取信息：

**1. purpose（核心目的）**
- 用一句话说明这篇笔记存在的根本原因
- 示例：
  - 文献笔记："消化《深度工作》第3章关于专注力的核心观点"
  - 项目笔记："跟踪APP重构项目的技术决策和待办事项"

**2. summary（内容摘要）**  
- 50字以内概括核心信息
- 示例："介绍了番茄工作法的25分钟专注+5分钟休息循环，以及如何应对干扰"

**3. connections（知识链接）**  
- 列出2-4个相关概念或笔记（使用`[[WikiLink]]`格式）
- 示例：`[[时间管理]]`、`[[注意力经济]]`、`[[心流状态]]`

**4. next_action（下一步行动）**  
- 提炼一个最关键的待办事项或思考问题
- 如果没有明确行动，填写"无"
- 示例："测试番茄工作法连续3天，记录专注度变化"

---

## 输出格式

严格按照以下YAML格式输出，不要添加任何解释文字：

```
***
note_type: "[识别或使用的笔记类型]"
purpose: "[一句话核心目的]"
summary: "[50字内摘要]"
connections:
  - "[[相关概念1]]"
  - "[[相关概念2]]"
  - "[[相关概念3]]"
next_action: "[最关键的下一步行动，若无则填'无']"
***
```

---

## 示例

### 输入
<note>
今天读了《原子习惯》第二章，讲到习惯的形成需要四个步骤：提示、渴望、反应、奖励。作者提出了"习惯堆叠"的概念，即在现有习惯后面添加新习惯。比如"刷完牙后做10个深蹲"。这个方法利用了现有习惯作为触发器。我想试试用这个方法培养晨间冥想的习惯。
</note>

<noteType>文献笔记</noteType>

### 输出
```
***
note_type: "文献笔记"
purpose: "提炼《原子习惯》第二章关于习惯形成机制和习惯堆叠方法的核心观点"
summary: "习惯形成包含提示-渴望-反应-奖励四步骤。习惯堆叠通过在现有习惯后添加新习惯，利用已有行为作为触发器来建立新习惯。"
connections:
  - "[[行为设计]]"
  - "[[触发器理论]]"
  - "[[习惯养成]]"
  - "[[晨间仪式]]"
next_action: "设计晨间冥想的习惯堆叠方案（如：喝完水后冥想5分钟），测试一周"
***
```

---

## 特殊说明

- 如果笔记内容过于简短或模糊，在`summary`中如实反映这一点
- `connections`至少提供2个，最多4个
- `next_action`应具体可执行，避免模糊表述
```

***

## 优化要点记录

### 1. 结构重组
**问题**：原prompt将"角色与目标"放在最前面，而核心任务说明滞后[3][2]
**优化**：直接以"任务"开头，一句话说明要做什么，符合现代LLM的最佳实践[2]

### 2. 简化层级
**问题**：使用了三级标题和多层嵌套列表，增加解析难度  
**优化**：扁平化结构，使用清晰的分节，每个维度独立呈现

### 3. 明确输入格式
**问题**：原prompt使用`{activeNote}`和`{noteType}`占位符，但没有说明这些如何提供  
**优化**：使用XML标签`<note>`和`<noteType>`明确输入边界，这是处理包含大量数据时的有效方法[4][2]

### 4. 增加示例
**问题**：没有提供任何输入/输出示例[4][2]
**优化**：添加完整的示例展示预期的输入格式和输出质量，这是现代prompt工程的关键实践[2]

### 5. 精简语言
**问题**：存在冗余表述（如"回答'Why?'"、"回答'What?'"）和过度解释  
**优化**：删除元层级的说明，直接给出清晰指令和示例

### 6. 统一语言风格
**问题**：中英文混用，括号内的英文补充可能干扰阅读  
**优化**：保留必要的英文字段名（因为YAML中需要），其他使用中文，减少认知负担

### 7. 增强可操作性
**问题**：`next_action`的指导不够具体  
**优化**：强调"具体可执行"，并在示例中展示什么是好的行动项

### 8. 输出控制
**问题**：指令"不要添加任何额外的解释"不够明确  
**优化**：在输出格式部分明确说明"严格按照以下YAML格式输出，不要添加任何解释文字"，并在示例中演示纯净输出[2]

这个优化版本遵循了现代LLM prompt工程的核心原则：指令前置、结构清晰、提供示例、减少歧义。它更易于LLM理解和执行，同时也更便于用户使用。[1][5][2]
