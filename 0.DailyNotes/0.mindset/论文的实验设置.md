论文的**实验设置**（Experimental Setup）是科学研究中为验证假设或回答研究问题而设计的系统性框架，涵盖实验设计、操作流程、环境条件及数据采集方法等关键要素。其核心目标是确保实验的可重复性、数据的可靠性和结论的有效性，通常包括以下核心内容：

这份笔记遵循 **Python 文档风格 (PEP 20)** 进行重构：**显式优于隐式，简单优于复杂，可读性至上。**

我们将“实验设置”视为一个标准化的 **`Class ExperimentalSetup`**，以下是该模块的详细说明文档。

---

# 📘 模块：Experimental Setup (实验设置)

**描述**：
本模块定义了验证假设所需的执行环境、流程控制与数据接口。
**核心原则**：可复现 (Reproducible)、可量化 (Quantifiable)、逻辑闭环 (Logical)。

---

## 1. 核心架构 (Core Design)

在设计实验前，必须明确输入（变量）与预期输出（指标）。

### ⚙️ 变量配置 (Variables Configuration)
*   **`independent_vars` (自变量)**: 你主动改变的因素。
    *   *Example*: 学习率、催化剂比例、教学方法。
*   **`dependent_vars` (因变量)**: 你观测的指标。
    *   *Example*: 准确率(Accuracy)、腐蚀速率、用户满意度。
*   **`control_vars` (控制变量)**: 必须“冻结”的干扰项。
    *   *Example*: 相同的随机种子 (`seed=42`)、室温 25℃、统一的硬件平台。

### 🧪 分组策略 (Grouping Strategy)
*   **Baseline**: 基准组/对照组 (用于证明你的方法有效)。
*   **Ablation**: 消融实验 (用于证明你模型的每个组件都有效)。
*   **Sample Size**: $N$ 值需满足统计功效 (Power Analysis)。

---

## 2. 系统依赖 (System Requirements)

为了确保 `Reproducibility` (可复现性)，需详细记录运行环境。

### 💻 硬件规格 (Hardware Specs)
> **原则**: 显式记录，不要模糊。

```yaml
Compute:
  - CPU: Intel i9-12900K
  - GPU: NVIDIA RTX 4090 (24GB VRAM)
Instrument:
  - Device: Thermo Fisher ESCALAB Xi+
  - Calibration: ISO 17025 Standard
```

### 🛠️ 软件环境 (Software Environment)
> **建议**: 提供具体的版本号，避免依赖地狱。

```python
OS = "Ubuntu 22.04 LTS"
Frameworks = {
    "Python": "3.9.12",
    "PyTorch": "2.1.0+cu118",
    "NumPy": "1.24.3"
}
Hyperparameters = {
    "optimizer": "AdamW",
    "learning_rate": 1e-4,
    "batch_size": 32,
    "epochs": 100
}
```

---

## 3. 数据流水线 (Data Pipeline)

描述数据从原始状态到输入模型的全过程。

1.  **Source (来源)**:
    *   公开数据集 (如 ImageNet, MIT-BIH) 或 自建数据集 (需说明采集协议/伦理审批号)。
2.  **Preprocessing (预处理)**:
    *   `Normalize`: 归一化/标准化。
    *   `Augmentation`: 旋转、裁剪、加噪 (如 SNR -5dB)。
    *   `Cleaning`: 去除异常值、缺失值填充。
3.  **Split (划分)**:
    *   **Train**: 80% (学习)。
    *   **Val**: 10% (调参)。
    *   **Test**: 10% (最终评估，**严禁**用于训练)。

---

## 4. 评估协议 (Evaluation Protocol)

如何定义“成功”？

*   **Metrics (指标)**: 必须客观。
    *   *理工科*: MSE, PSNR, F1-Score, 产率。
    *   *社科*: P值 ($p < 0.05$), Cohen's d。
*   **Validation (验证)**:
    *   交叉验证 (k-fold Cross-Validation)。
    *   多次重复 (如 5 次实验取 Mean ± Std) 以减少随机误差。

---

## 5. 常见异常与处理 (Troubleshooting)

| 错误类型 (Error) | 描述 (Description) | 修正方案 (Fix) |
| :--- | :--- | :--- |
| **Variable Leakage** | 实验中未严格控制变量 (如不同组用了不同硬件) | 统一环境，固定随机种子。 |
| **Magic Numbers** | 出现未解释的参数 (如 `w = 0.7`) | 在设置中明确参数来源或依据。 |
| **Overfitting** | 只在特定数据集有效 | 增加“鲁棒性测试”或外部验证集。 |
| **Vague Steps** | 描述模糊 ("加热了一会儿") | 量化操作 ("加热至100℃保持10min")。 |

---

## ⚡ 快速自检清单 (Quick Checklist)

在提交论文前，运行以下 `assert` 检查：

- [ ] **Assert**: 读者能否仅凭此章节复现我的实验？
- [ ] **Assert**: 每一个对比实验是否只改变了一个变量？
- [ ] **Assert**: 硬件、软件版本、超参数是否已全部列出？
- [ ] **Assert**: 数据集的划分是否杜绝了信息泄露？
- [ ] **Assert**: 是否包含基线 (Baseline) 对比？

---

> **总结**: 优秀的实验设置文档应当像一份**安装脚本**，清晰、无歧义、即插即用。不要写散文，要写“说明书”。