## 突变操作

在`hint.tsx`文件中，定义了一个`Hint`组件，它用于显示提示信息。该组件接受一个`label`属性作为提示文本，一个`children`属性作为要显示的子组件，以及一些可选的布局属性，如`side`、`align`、`sideOffset`和`alignOffset`。

在`room.tsx`文件中，定义了一个`Room`组件，它用于创建一个Convex房间。该组件接受一个`children`属性作为要渲染的子组件，一个`roomId`属性作为房间的ID，以及一个`fallback`属性作为加载时的占位符。

在`actions.tsx`文件中，定义了一个`Actions`组件，它用于显示一组下拉菜单，其中包含一些操作选项。该组件接受一个`children`属性作为要显示的子组件，一个`side`属性作为下拉菜单的位置，一个`sideOffset`属性作为下拉菜单的位置偏移量，一个`id`属性作为要操作的实体的ID，以及一个`title`属性作为要操作的实体的标题。

**这三个组件都可以使用了`useMutation`和子来执行Conv操作。**`useMutation`钩子用于了Convex的`useMutation`方法，提供了一种简便的方式来进行数据库的突变操作。它主要做了两件事：管理突变请求的状态（pending）和封装了突变请求的调用逻辑，处理了请求的发送以及异常的抛出。

总的来说，这些文件中的组件都使用了`useMutation`钩子来执行数据库操作，用于`Hint`组件和`Room`组件分别使用了`Tooltip`组件`TooltipProvider`来显示提示信息和创建Convex房间。


> [!NOTE]
> 在`use-api-mutation.ts`文件中，定义了一个`useApiMutation`钩子，它封装了Convex的`useMutation`方法，提供了一种简便的方式来进行API的突变操作。这个钩子主要做了两件事：管理突变请求的状态（pending）和封装了突变请求的调用逻辑，处理了请求的发送以及异常的抛出。
> 
> 在`use-api-mutation.ts`文件中，`useApiMutation`钩子的定义如下：
> 
> ```ts
> export const useApiMutation = (mutationFunction: any) => {
>   const [pending, setPending] = useState(false);
>   const apiMutation = useMutation(mutationFunction);
> 
>   const mutate = (payload: any) => {
>     setPending(true);
>     return apiMutation(payload)
>       .finally(() => setPending(false))
>       .then((result) => {
>         return result;
>       })
>       .catch((error) => {
>         throw error;
>       });
>   };
> 
>   return {
>     mutate,
>     pending,
>   };
> };
> ```
> 
> 在`use-api-mutation.ts`文件中，`useApiMutation`钩子接受一个`mutationFunction`参数，这个参数是一个Convex的突变函数。这个函数会在Convex的`useMutation`钩子中被调用，用于执行API的突变操作。
> 
> 在`use-api-mutation.ts`文件中，`useApiMutation`钩子返回一个对象，这个对象包含两个属性：`mutate`和`pending`。`mutate`是一个函数，用于执行突变操作。`pending`是一个布尔值，表示当前是否有突变请求正在处理中。
> 
> 在`hint.tsx`、`room.tsx`和`actions.tsx`文件中，都使用了`useApiMutation`钩子来执行Conv操作。例如，在`actions.tsx`文件中，`Actions`组件使用了`useApiMutation`钩子来执行删除操作：
> 
> ```ts
> const { mutate, pending } = useApiMutation(api.board.remove);
> 
> const onDelete = () => {
>   mutate({ id })
>     .then(() => toast.success("Board deleted"))
>     .catch(() => toast.error("Failed to delete board"));
> };
> ```
> 
> 在这个例子中，`useApiMutation`钩子被用来执行`api.board.remove`突变函数，这个函数用于删除一个Convex数据库中的板。`mutate`函数被用来执行这个突变操作，`pending`属性被用来表示当前是否有删除操作正在处理中。
