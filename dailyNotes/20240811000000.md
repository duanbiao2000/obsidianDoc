---
aliases: 
theme: 
original: 
url: https://www.goodreads.com/book/show/199277807-advanced-react?ref=rae_0
author: 
date_created: 
date_updated: 
type: 
high_priority: false
tags:
---
![image.png](https://cdn.jsdelivr.net/gh/duanbiao2000/BlogGallery@main/picture/20240811123954.png)

## React 中的 re-render（重新渲染）

**React 中的 re-render 指的是当组件的状态（state）或属性（props）发生变化时，React 自动重新执行组件的 render 函数，从而更新 UI 的过程。**

### 为什么会发生 re-render？

- **状态更新 (state change):** 当你调用 `setState` 方法修改组件的状态时，React 会触发 re-render。
- **属性更新 (props change):** 当父组件向子组件传递新的 props 时，子组件也会触发 re-render。
- **父组件 re-render：** 当父组件 re-render 时，它的所有子组件通常也会 re-render。
- **使用了一些会触发 re-render 的 Hooks：** 比如 `useEffect` 在某些情况下会触发组件 re-render。

### re-render 的过程

1. **检测变化：** React 会比较当前的 state 和 props 与上一次渲染时的值，如果发生变化，就会标记组件为需要更新。
2. **执行 render 函数：** React 会重新执行组件的 render 函数，生成新的虚拟 DOM (Virtual DOM)。
3. **Diff 算法：** React 会比较新的虚拟 DOM 与旧的虚拟 DOM，找出差异。
4. **更新 DOM：** React 会高效地更新真实的 DOM，只改变那些有差异的部分，以达到更新 UI 的目的。

### 为什么要 re-render？

- **保持 UI 与数据同步：** 确保用户界面始终反映最新的数据。
- **响应用户交互：** 当用户点击按钮、输入文字等操作时，通过更新 state 来触发 re-render，实现交互。

### 如何优化 re-render？

- **避免不必要的 re-render：**
    - 使用 `React.memo` 或 `useMemo` 优化纯组件和计算结果。
    - 使用 `shouldComponentUpdate` (类组件) 或自定义 Hooks 优化组件的更新逻辑。
- **合理使用 `useEffect`：** 避免在 `useEffect` 中触发不必要的副作用。
- **优化子组件的更新逻辑：** 减少不必要的子组件 re-render。
- **利用 React 的性能优化工具：** 如 React DevTools 可以帮助你分析组件的 re-render 情况。

### 总结

re-render 是 React 的核心机制之一，它使得 React 能够高效地响应数据变化，并保持 UI 的一致性。理解 re-render 的原理和优化方法，对于构建高性能的 React 应用非常重要。

