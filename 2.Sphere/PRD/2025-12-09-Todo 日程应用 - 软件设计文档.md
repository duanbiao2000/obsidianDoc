---
aliases:
date: 2025-12-09 15:56
tags:
source:
update:
rating:
related:
view-count: 4
---
# Todo 日程应用 - 软件设计文档

## 项目概述

设计一个极简风格但实用性强的 Todo 日程应用（PWA），注重用户体验和视觉美感，提供高效的任务管理功能，支持离线使用。

### 设计理念

- **极简主义**: 清晰的视觉层次，去除冗余元素
- **实用至上**: 提供核心任务管理功能，避免功能臃肿
- **视觉优雅**: 现代化的设计语言，流畅的动画效果
- **离线优先**: PWA 架构，完全支持离线使用
- **响应迅速**: IndexedDB 本地存储，即时反馈

---

## 核心功能需求

### 1. 任务管理 (CRUD)

- ✅ **创建任务**: 快速添加任务，支持回车快捷键
- ✅ **编辑任务**: 双击或点击编辑按钮修改任务
- ✅ **删除任务**: 滑动删除或点击删除按钮
- ✅ **完成标记**: 点击复选框标记任务完成状态

### 2. 任务组织

- ✅ **分类管理**: 支持多个列表（工作、生活、学习等）
- ✅ **优先级**: 高、中、低三级优先级，用颜色区分
- ✅ **标签系统**: 自定义标签，支持多标签
- ✅ **截止日期**: 设置任务到期时间，逾期提醒

### 3. 视图与筛选

- ✅ **今日视图**: 显示今天需要完成的任务
- ✅ **全部任务**: 查看所有任务
- ✅ **已完成**: 查看已完成任务历史
- ✅ **搜索功能**: 快速搜索任务内容

### 4. 用户体验

- ✅ **深色/浅色模式**: 自动或手动切换主题
- ✅ **离线支持**: PWA 架构，完全离线可用
- ✅ **本地存储**: 使用 IndexedDB 持久化数据
- ✅ **快捷键**: 支持常用操作的键盘快捷键
- ✅ **动画效果**: 流畅的过渡和微交互
- ✅ **可安装**: 支持添加到主屏幕

---

## 技术架构

### 技术栈选择

#### 前端框架

- Vue 3: 渐进式 JavaScript 框架
- Composition API: 现代化的组件逻辑组织方式
- `<script setup>`: 简洁的单文件组件语法
- TypeScript: 可选，提供类型安全（推荐）

#### PWA 核心技术

- `vite-plugin-pwa`: Vite PWA 插件，自动化 PWA 配置
- Workbox: Service Worker 工具库
- Web App Manifest: PWA 配置文件
- Cache API: 静态资源缓存
- IndexedDB: 结构化数据存储

#### 状态管理与数据存储

- Pinia: Vue 官方状态管理库
- IndexedDB: 本地持久化数据库，支持大量数据
- Dexie.js: IndexedDB 封装库（推荐，简化操作）
- `pinia-plugin-persistedstate`: Pinia 持久化插件（可选）

#### 构建工具与开发工具

- Vite: 现代化构建工具，极速开发体验
- `vite-plugin-pwa`: 自动生成 Service Worker 和 Manifest
- Vue DevTools: Vue 开发调试工具
- ESLint + Prettier: 代码规范和格式化

### 项目结构

```text
todo-app/
├── index.html                  # 入口 HTML
├── package.json                # 项目依赖配置
├── vite.config.js              # Vite + PWA 配置
├── .eslintrc.cjs               # ESLint 配置
├── .prettierrc                 # Prettier 配置
├── public/                     # 静态资源目录
│   └── icons/                  # PWA 图标（多尺寸）
│       ├── icon-72x72.png
│       ├── icon-96x96.png
│       ├── icon-128x128.png
│       ├── icon-144x144.png
│       ├── icon-152x152.png
│       ├── icon-192x192.png
│       ├── icon-384x384.png
│       └── icon-512x512.png
├── src/
│   ├── main.js                 # 应用入口
│   ├── App.vue                 # 根组件
│   ├── assets/                 # 资源文件
│   │   ├── styles/             # 样式文件
│   │   │   ├── variables.css   # CSS 变量
│   │   │   ├── reset.css       # 样式重置
│   │   │   └── main.css        # 主样式
│   │   └── icons/              # SVG 图标组件
│   ├── components/             # Vue 组件
│   │   ├── TaskInput.vue       # 任务输入组件
│   │   ├── TaskItem.vue        # 任务项组件
│   │   ├── TaskList.vue        # 任务列表组件
│   │   ├── Sidebar.vue         # 侧边栏组件
│   │   ├── Header.vue          # 头部组件
│   │   └── CategoryManager.vue # 分类管理组件
│   ├── composables/            # 组合式函数
│   │   ├── useTheme.js         # 主题切换
│   │   ├── useOnline.js        # 网络状态检测
│   │   └── useKeyboard.js      # 快捷键处理
│   ├── stores/                 # Pinia 状态管理
│   │   ├── task.js             # 任务状态
│   │   ├── category.js         # 分类状态
│   │   └── app.js              # 应用全局状态
│   ├── db/                     # IndexedDB 数据库
│   │   ├── index.js            # 数据库初始化
│   │   ├── tasks.js            # 任务数据操作
│   │   └── categories.js       # 分类数据操作
│   └── utils/                  # 工具函数
│       ├── date.js             # 日期处理
│       ├── uuid.js             # ID 生成
│       └── validators.js       # 数据验证
└── dist/                       # 构建输出目录
```

---

## 数据模型设计

### IndexedDB 数据库结构

```js
// 数据库名称: TodoAppDB
// 版本: 1

// Object Store 1: tasks
{
  keyPath: "id",
  autoIncrement: false,
  indexes: [
    { name: "category", keyPath: "category", unique: false },
    { name: "completed", keyPath: "completed", unique: false },
    { name: "dueDate", keyPath: "dueDate", unique: false },
    { name: "priority", keyPath: "priority", unique: false },
    { name: "createdAt", keyPath: "createdAt", unique: false }
  ]
}

// Object Store 2: categories
{
  keyPath: "id",
  autoIncrement: false,
  indexes: [
    { name: "order", keyPath: "order", unique: false }
  ]
}

// Object Store 3: settings
{
  keyPath: "key",
  autoIncrement: false
}
```

### Task 对象结构

```ts
{
  id: string;                 // UUID v4
  title: string;              // 任务标题
  description: string;        // 任务描述（可选）
  completed: boolean;         // 完成状态
  priority: 'low' | 'medium' | 'high';
  category: string;           // 分类 ID
  tags: string[];             // 标签数组
  dueDate: string;            // ISO 8601 日期字符串，如 "2025-12-10"
  createdAt: number;          // 时间戳（毫秒）
  updatedAt: number;          // 时间戳（毫秒）
  order: number;              // 排序序号
}
```

### Category 对象结构

```ts
{
  id: string;
  name: string;
  icon: string;               // Emoji 或图标标识
  color: string;              // 十六进制颜色值
  order: number;
}
```

### AppState 结构

```ts
{
  tasks: Task[];
  categories: Category[];
  currentView: 'today' | 'all' | 'completed' | string; // 若为分类 ID，则显示该分类
  currentCategory: string | null;
  theme: 'light' | 'dark';
  searchQuery: string;
  isOnline: boolean;
  lastSync: number | null;    // 预留字段
}
```

### PWA Manifest 配置 (`public/manifest.webmanifest`)

```json
{
  "name": "极简 Todo - 日程管理应用",
  "short_name": "极简Todo",
  "description": "极简风格的离线 Todo 日程管理应用",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#3b82f6",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "/assets/images/icon-72x72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/assets/images/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/assets/images/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ],
  "categories": ["productivity", "utilities"],
  "screenshots": []
}
```

---

## UI/UX 设计方案

### 设计系统

#### 色彩方案

**浅色模式**

```css
--bg-primary: #ffffff;
--bg-secondary: #f8fafc;
--bg-tertiary: #f1f5f9;
--text-primary: #0f172a;
--text-secondary: #64748b;
--accent-primary: #3b82f6;
--accent-success: #10b981;
--accent-warning: #f59e0b;
--accent-danger: #ef4444;
```

**深色模式**

```css
--bg-primary: #0f172a;
--bg-secondary: #1e293b;
--bg-tertiary: #334155;
--text-primary: #f8fafc;
--text-secondary: #94a3b8;
--accent-primary: #60a5fa;
--accent-success: #34d399;
--accent-warning: #fbbf24;
--accent-danger: #f87171;
```

#### 字体系统

```css
--font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
--font-size-xs: 0.75rem;    /* 12px */
--font-size-sm: 0.875rem;   /* 14px */
--font-size-base: 1rem;     /* 16px */
--font-size-lg: 1.125rem;   /* 18px */
--font-size-xl: 1.5rem;     /* 24px */
--font-size-2xl: 2rem;      /* 32px */
```

#### 间距系统

```css
--spacing-1: 0.25rem;   /* 4px */
--spacing-2: 0.5rem;    /* 8px */
--spacing-3: 0.75rem;   /* 12px */
--spacing-4: 1rem;      /* 16px */
--spacing-6: 1.5rem;    /* 24px */
--spacing-8: 2rem;      /* 32px */
```

#### 圆角与阴影

```css
--radius-sm: 0.375rem;
--radius-md: 0.5rem;
--radius-lg: 0.75rem;
--radius-full: 9999px;

--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
```

### 布局设计

```
┌─────────────────────────────────────────┐
│  Header (Logo + Theme Toggle + Search)  │
├──────────┬──────────────────────────────┤
│          │                              │
│ Sidebar  │      Main Content Area       │
│          │                              │
│ - 今日   │   ┌──────────────────────┐   │
│ - 全部   │   │  Task Input          │   │
│ - 已完成 │   └──────────────────────┘   │
│          │                              │
│ 分类列表 │   ┌──────────────────────┐   │
│ - 工作   │   │  Task Item           │   │
│ - 生活   │   ├──────────────────────┤   │
│ - 学习   │   │  Task Item           │   │
│          │   ├──────────────────────┤   │
│          │   │  Task Item           │   │
│          │   └──────────────────────┘   │
└──────────┴──────────────────────────────┘
```

### 组件设计

#### 1. `TaskInput` 组件

- 大号输入框，占位符提示
- 支持回车快速添加
- 展开模式显示更多选项（优先级、日期、标签）

#### 2. `TaskItem` 组件

- 复选框 + 任务标题 + 操作按钮
- 优先级色条（左侧边框）
- 悬停显示编辑/删除按钮
- 完成任务显示删除线

#### 3. `Sidebar` 组件

- 视图切换按钮（今日 / 全部 / 已完成）
- 分类列表（带图标与颜色）
- 添加分类按钮

#### 4. `Header` 组件

- 应用标题 / Logo
- 搜索框（支持实时过滤）
- 主题切换按钮

### 动画效果

```css
/* 任务添加动画 */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 任务删除动画 */
@keyframes slideOut {
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

/* 复选框动画 */
@keyframes checkmark {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
```

---

## 实现计划

### Phase 1: 项目初始化与 PWA 基础

1. 使用 Vite 创建 Vue 3 项目
2. 安装依赖：Vue Router、Pinia、`vite-plugin-pwa`、Dexie.js
3. 配置 `vite-plugin-pwa`（Workbox 策略）
4. 配置 PWA Manifest 文件
5. 设计并生成应用图标（多尺寸）
6. 实现设计系统（CSS Variables + 主题切换）
7. 配置 ESLint 和 Prettier

### Phase 2: IndexedDB 数据层与状态管理

1. 使用 Dexie.js 设计数据库结构
2. 实现数据库初始化和版本管理
3. 封装任务和分类的 CRUD 操作
4. 创建 Pinia stores（task、category、app）
5. 集成 IndexedDB 与 Pinia
6. 添加错误处理和数据验证

### Phase 3: Vue 组件与核心功能

1. 创建基础布局组件（`App.vue`、`Header`、`Sidebar`）
2. 实现 `TaskInput` 组件（任务创建）
3. 实现 `TaskItem` 组件（任务展示与编辑）
4. 实现 `TaskList` 组件（任务列表渲染）
5. 集成 Pinia 状态管理
6. 实现任务 CRUD 功能

### Phase 4: 高级功能组件

1. 实现 `CategoryManager` 组件（分类管理）
2. 添加优先级选择器组件
3. 添加标签管理组件
4. 集成日期选择器（可使用第三方库）
5. 实现搜索和筛选功能
6. 实现任务排序和拖拽（可选）

### Phase 5: PWA 离线支持

1. 配置 Service Worker 缓存策略
2. 实现离线检测
3. 添加离线提示 UI
4. 测试离线功能
5. 实现后台同步（可选）

### Phase 6: 用户体验优化

1. 实现 `useTheme` composable（深色模式）
2. 添加 Vue Transition 动画效果
3. 实现 `useKeyboard` composable（快捷键）
4. 响应式布局适配（移动端优化）
5. 实现 PWA 安装提示组件
6. 添加加载状态和骨架屏

### Phase 7: 优化完善

1. 性能优化（懒加载、虚拟滚动）
2. 无障碍访问
3. 错误处理和日志
4. 用户引导和帮助

---

## 验证计划

### 功能测试

- ✅ 任务的增删改查功能正常
- ✅ IndexedDB 数据持久化正常
- ✅ 分类和标签功能正常
- ✅ 搜索和筛选功能正常
- ✅ 主题切换功能正常

### PWA 功能测试

- ✅ Service Worker 注册成功
- ✅ 离线模式下应用可正常使用
- ✅ 缓存策略正确
- ✅ 应用可安装到主屏幕
- ✅ 离线时数据操作正常
- ✅ 网络恢复后数据同步正常

### 用户体验测试

- ✅ 界面美观，符合极简设计理念
- ✅ 操作流畅，动画自然
- ✅ 响应式设计在不同设备上表现良好
- ✅ 快捷键功能正常

### 浏览器兼容性

- Chrome/Edge (最新版本)
- Firefox (最新版本)
- Safari (最新版本)

---

## 用户评审要点

> **IMPORTANT**  
> **PWA 设计方向确认**  
> 请确认以下设计方向是否符合您的预期：

1. **技术选型**: Vue 3 + Vite + `vite-plugin-pwa` + Pinia + Dexie.js
2. **功能范围**: 聚焦核心任务管理，包含分类、优先级、标签、日期等功能
3. **视觉风格**: 极简现代风格，支持深色/浅色双主题
4. **数据存储**: 使用 IndexedDB（Dexie.js）本地数据库，完全离线可用
5. **PWA 特性**: 支持离线使用、可安装、自动更新、后台同步（可选）
6. **开发体验**: Composition API + `<script setup>`，现代化 Vue 3 开发方式

> **NOTE**  
> **可选扩展功能**  
> 如果您需要，我们可以在后续添加：
> 
> - 任务拖拽排序
> - 子任务/清单
> - 任务重复设置（每日/每周）
> - 数据导出/导入
> - 番茄钟计时器
> - 任务统计图表